Takes in a "ping" from a user when scanning a Rebowl/Recup QR Code. Allows analytics and optional user login.

Scans: [Cloud Storage](https://console.cloud.google.com/storage/browser/rebowl-user-scans;tab=objects?forceOnBucketsSortingFiltering=false&project=user-scan-7a2e1&prefix=) [BigQuery](https://console.cloud.google.com/bigquery?project=user-scan-7a2e1&p=user-scan-7a2e1&d=scans&t=pings&page=table)

[Code on GitHub](https://github.com/RECUP-git/user-scan-app)

[Ingest function](https://console.cloud.google.com/functions/details/europe-west1/user-scan-ingest?project=rebowl-pos) â†’ [Logs](https://console.cloud.google.com/logs/query;query=resource.type%3D%22cloud_function%22%20resource.labels.region%3D%22europe-west1%22?organizationId=1008342064481&project=user-scan-7a2e1)

[Test locally](http://localhost:3000/test-rudi)

## Features

- Timestamp
- IP Informationen
- User Agent
- Region (basierend auf IP)
- Bot Erkennung mit [reCAPTCHA v3](https://developers.google.com/recaptcha/docs/v3)
- Signup / Sign in via [Auth0](./Auth0.html)
- Recent scans

[[Count the number of Rebowl scans]]

- Design

   [https://www.figma.com/embed?embed_host=notion&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FSjTaK09O9K4FDHBnZlBxon%2FRebowl-QR-Ping](https://www.figma.com/embed?embed_host=notion&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FSjTaK09O9K4FDHBnZlBxon%2FRebowl-QR-Ping)

## Properties

Provided by the browser:

- `event_id` Unique random ID generated for each scan
- `tag_id` Which tag was scanned
- `source` Object with various properties about the user
   - `recaptcha_token`
- `meta` Other information that was collected
   - `partner`
   - `location_name`
   - `location_latlong`
   - `user_email`

Filled by the system:

- `timestamp`
- `insert_id`
- `source` Object with various properties about the user
   - `ip`
   - `user_agent`
   - `country` Generated by AppEngine
   - `region` Generated by AppEngine
   - `city` Generated by AppEngine
   - `city_latlong` Generated by AppEngine
   - `captcha_success`
   - `captcha_action`
   - `captcha_timestamp`
   - `human_score`



